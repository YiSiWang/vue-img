!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define("VueImg",["exports"],n):n(e.VueImg=e.VueImg||{})}(this,function(e){"use strict";var n="//fuss10.elemecdn.com",i=["alpha","beta"];i.some(function(e){return window.document.domain.match(e+".ele")?n="//fuss."+e+".elenet.me":void 0});var t=n;e.canWebp=!1;var r=new Image;r.onload=function(){e.canWebp=!0},r.src="data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAsAAAABBxAREYiI/gcAAABWUDggGAAAADABAJ0BKgEAAQABABwlpAADcAD+/gbQAA==";var a=function(e){return(e+"").replace(/^(\w)(\w\w)(\w{29}(\w*))$/,"/$1/$2/$3.$4")},o=function(e){if(!e)return"";var n=e.indexOf("*"),i="thumbnail/";if(-1===n)i+=e+"x/";else{var t=e.slice(0,n)+"x"+e.slice(n+1);i+="!"+t+"r/gravity/Center/crop/"+t+"/"}return i},A=function(n){var i="string"==typeof n.prefix?n.prefix:t,r="number"==typeof n.quality?n.quality:75,A=e.canWebp?"format/webp/":"";return i+a(n.hash)+("?imageMogr/quality/"+r+"/"+A)+o(n.size)},u=function(e,n,i){var t=function(e,n){e&&n&&("img"===i?e.src=n:e.style.backgroundImage="url("+n+")")};e.directive(i,{bind:function(){this.modifiers.now||t(this.el,n.loading)},update:function(e){if(e){var i=new Image,r=A({hash:e,prefix:n.prefix,quality:n.quality,size:this.arg});i.onload=t.bind(null,this.el,r),n.error&&(i.onerror=t.bind(null,this.el,n.error)),i.src=r}}})},c=function(e,n){var i=n||Object.create(null);u(e,i,"img"),u(e,i,"bgi")};e.cdn=t,e.toPath=a,e.getSrc=A,e.install=c});