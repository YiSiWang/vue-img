!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define("VueImg",["exports"],n):n(e.VueImg=e.VueImg||{})}(this,function(e){"use strict";var n="//fuss10.elemecdn.com",i=["alpha","beta"];i.forEach(function(e){window.document.domain.match(e+".ele")&&(n="//fuss."+e+".elenet.me")});var t=n;e.canWebp=!1;var r=new Image;r.src="data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAsAAAABBxAREYiI/gcAAABWUDggGAAAADABAJ0BKgEAAQABABwlpAADcAD+/gbQAA==",r.onload=function(){e.canWebp=!0};var a=function(e){return(e+"").replace(/^(\w)(\w\w)(\w{29}(\w*))$/,"/$1/$2/$3.$4")},o=function(e){if(!e)return"";var n=e.indexOf("*"),i="thumbnail/";if(-1===n)i+=e+"x/";else{var t=e.slice(0,n)+"x"+e.slice(n+1);i+="!"+t+"r/gravity/Center/crop/"+t+"/"}return i},A=function(e){var n=e.prefix,i=e.hash,t=e.quality,r=e.size,A=e.canWebp,c=A?"format/webp/":"";return n+a(i)+("?imageMogr/quality/"+t+"/"+c)+o(r)},c=function(n,i,r){var a="string"==typeof i.prefix?i.prefix:t,o=i.quality<=100?i.quality:75,c=function(e,n){e&&n&&("img"===r?e.src=n:e.style.backgroundImage="url("+n+")")};n.directive(r,{bind:function(){this.modifiers.now||c(this.el,i.loading)},update:function(n){var t=this;if(n){var r=A({prefix:a,hash:n,quality:o,canWebp:e.canWebp,size:this.arg}),u=new Image;u.src=r,u.onload=function(){c(t.el,r)},i.error&&(u.onerror=function(){c(t.el,i.error)})}}})},u=function(e,n){c(e,n,"img"),c(e,n,"bgi")};e.cdn=t,e.toPath=a,e.getSrc=A,e.install=u});